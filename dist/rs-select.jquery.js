"use strict";$.fn.rsSelect=function(e){return"object"!=typeof e&&e?$.fn.rsSelect.methods[e]?$.fn.rsSelect.methods[e].apply(this,Array.prototype.slice.call(arguments,1)):void $.error("Method "+e+" does not exist on jQuery.rsSelect"):$.fn.rsSelect.methods.init.apply(this,arguments)},$.fn.rsSelect.methods={init:function(e){function t(e,t,l,n){var a=$(c.wrap.element,c.wrap.attrs);c.wrap.copyClasses===!0&&a.addClass(e.attr("class")),n?a.addClass(c.disabledClass):a.removeClass(c.disabledClass),l?a.addClass(c.multipleClass):a.removeClass(c.multipleClass);var i=$(c.toggle.element,c.toggle.attrs);i.html(s(t,i)),a.append(i);var o=$(c.list.element,c.list.attrs).hide();return t.each(function(){var e=$(this),t=$(c.item.element,c.item.attrs);c.item.copyClasses===!0&&t.addClass(e.attr("class")),"undefined"!=typeof e.attr("disabled")?t.addClass(c.disabledClass):t.removeClass(c.disabledClass),"undefined"!=typeof e.attr("selected")?t.addClass(c.selectedClass):t.removeClass(c.selectedClass),t.html(r(e,t)),o.append(t)}),a.append(o),o.wrapInner(c.list.wrapInner),a.wrapInner(c.wrap.wrapInner),a.insertAfter(e),a}function s(e,t){var s="",r=e.filter("[selected]");return r.each(function(e){var t=$(this);e>0&&(s+=c.toggle.separator),s+=t.text()}),c.toggle.content(s,t)}function r(e,t){var s=e.text();return c.item.content(s,t)}function l(e,t){e.each(function(){var s=$(this),r=e.index(s);s.hasClass(c.selectedClass)?t.eq(r).prop("selected",!0).attr("selected",""):t.eq(r).prop("selected",!1).removeAttr("selected")})}function n(e){e.on("click.rsSelect-item",function(){var e=$(this),t=e.closest("."+c.wrap.attrs.class),r=t.find("."+c.toggle.attrs.class),n=t.find("."+c.list.attrs.class),a=n.find("."+c.item.attrs.class),i=$(t[0].rsSelectSelect),d=i.find("option"),f=t.hasClass(c.disabledClass)||e.hasClass(c.disabledClass),p=t.hasClass(c.multipleClass),u=e.hasClass(c.selectedClass);if(f)return!1;if("function"==typeof c.beforeChange&&c.beforeChange(t,i,e)===!1)return!1;if("function"==typeof i.triggerHandler&&i.triggerHandler("rsSelect.beforeChange",[t,i,e])===!1)return!1;var g=!1;return u?p&&a.filter("."+c.selectedClass).length>1&&(e.removeClass(c.selectedClass),g=!0):(p||a.removeClass(c.selectedClass),e.addClass(c.selectedClass),g=!0),l(a,d),r.html(s(d,r)),p||o(n),"function"==typeof c.afterChange&&c.afterChange(t,i,e,g),"function"==typeof i.triggerHandler&&i.triggerHandler("rsSelect.afterChange",[t,i,e,g]),!1})}function a(e){e.on("click.rsSelect-toggle",function(){var e=$(this),t=e.closest("."+c.wrap.attrs.class),s=t.find("."+c.list.attrs.class);s.is(":visible")?o(s):i(s)})}function i(e){var t=e.closest("."+c.wrap.attrs.class),s=$(t[0].rsSelectSelect),r="undefined"!=typeof $.easing[c.easing]&&c.easing;if("function"==typeof c.beforeOpen&&c.beforeOpen(t,s)===!1)return!1;if("function"==typeof s.triggerHandler&&s.triggerHandler("rsSelect.beforeOpen",[t,s])===!1)return!1;if(c.upClass){var l=$(window),n=l.height(),a=l.scrollTop(),i=n+a;t.removeClass(c.upClass),e.show();var d=e.outerHeight(),f=e.offset().top,p=d+f;e.hide(),p>i&&t.addClass(c.upClass)}t.addClass(c.expandedClass),e.stop(!0,!1).slideDown(c.speed,r,function(){c.autoClose===!0&&c.autoClose===!0&&$(document).on("click.rsSelect-autoclose",function(s){0===$(s.target).closest(t[0]).length&&o(e)}),"function"==typeof c.afterOpen&&c.afterOpen(t,s),"function"==typeof s.triggerHandler&&s.triggerHandler("rsSelect.afterOpen",[t,s])})}function o(e){var t=e.closest("."+c.wrap.attrs.class),s=$(t[0].rsSelectSelect),r="undefined"!=typeof $.easing[c.easing]&&c.easing;return("function"!=typeof c.beforeClose||c.beforeClose(t,s)!==!1)&&(("function"!=typeof s.triggerHandler||s.triggerHandler("rsSelect.beforeClose",[t,s])!==!1)&&(c.autoClose===!0&&$(document).unbind("click.rsSelect-autoclose"),void e.stop(!0,!1).slideUp(c.speed,r,function(){t.removeClass(c.expandedClass),"function"==typeof c.afterClose&&c.afterClose(t,s),"function"==typeof s.triggerHandler&&s.triggerHandler("rsSelect.afterClose",[t,s])})))}var c=$.extend(!0,{},$.fn.rsSelect.defaults,e);return c.extended=!0,this.each(function(){var e=$(this).hide();if(e.is("select")){"undefined"!=typeof e[0].rsSelectDropdown&&($(e[0].rsSelectDropdown).remove(),delete e[0].rsSelectDropdown,delete e[0].rsSelectSettings);var s=e.find("option"),r="undefined"!=typeof e.attr("multiple"),l="undefined"!=typeof e.attr("disabled");!r&&s.filter("[selected]").length<1&&s.filter(":first").prop("selected",!0).attr("selected","");var i=t(e,s,r,l);i[0].rsSelectSettings=c,i[0].rsSelectSelect=e[0],e[0].rsSelectDropdown=i[0],e[0].rsSelectSettings=c;var o=i.find("."+c.list.attrs.class+" ."+c.item.attrs.class);n(o);var d=i.find(" ."+c.toggle.attrs.class);a(d),"function"==typeof c.afterInit&&c.afterInit(i,e),"function"==typeof e.triggerHandler&&e.triggerHandler("rsSelect.afterInit",[i,e])}})},destroy:function(){return this.each(function(){var e=$(this);e.is("select")&&"undefined"!=typeof e[0].rsSelectDropdown&&($(e[0].rsSelectDropdown).remove(),delete e[0].rsSelectDropdown,delete e[0].rsSelectSettings,e.css("display",""))})},reinit:function(){return this.each(function(){var e=$(this);if(e.is("select"))return"undefined"!=typeof e[0].rsSelectSettings?e.rsSelect(e[0].rsSelectSettings):void 0})}},$.fn.rsSelect.defaults={disabledClass:"is-disabled",selectedClass:"is-selected",expandedClass:"is-expanded",multipleClass:"is-multiple",speed:400,easing:"",autoClose:!0,upClass:"direction-up",wrap:{element:"<div>",attrs:{class:"rs-select"},copyClasses:!0,wrapInner:""},toggle:{element:"<div>",attrs:{class:"rs-select-button"},content:function(e){return e||(e="&nbsp"),e},separator:", "},list:{element:"<ul>",attrs:{class:"rs-select-options"},wrapInner:""},item:{element:"<li>",attrs:{class:"rs-select-option"},content:function(e){return e||(e="&nbsp"),e},copyClasses:!0}};